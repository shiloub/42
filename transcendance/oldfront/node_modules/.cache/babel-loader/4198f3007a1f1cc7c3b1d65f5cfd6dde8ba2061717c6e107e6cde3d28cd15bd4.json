{"ast":null,"code":"var _jsxFileName = \"/app/src/Home.tsx\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction getCookie(name) {\n  const value = `; ${document.cookie}`;\n  const parts = value.split(`; ${name}=`);\n  if (parts.length === 2) return parts.pop().split(';').shift();\n}\nfunction Input_field({\n  text,\n  value,\n  onChange\n}) {\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: text,\n      value: value,\n      onChange: onChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n_c = Input_field;\nfunction Button({\n  value,\n  handleClick\n}) {\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    className: \"send_friendship_button\",\n    onClick: handleClick,\n    children: value\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 5\n  }, this);\n}\n_c2 = Button;\nfunction Home({\n  socket\n}) {\n  _s();\n  const token = getCookie('token');\n  const [friend, setFriend] = useState('');\n  const [me, setMe] = useState(null);\n  const [error, setError] = useState(null);\n  const [requestStatus, setRequestStatus] = useState(null);\n  useEffect(() => {\n    const url_get_me = \"http://localhost:3333/users/me\";\n    axios.get(url_get_me, {\n      headers: {\n        \"Authorization\": `Bearer ${token}`\n      }\n    }).then(response => {\n      const user = response.data;\n      console.log(\"Données de l'utilisateur :\", user);\n      setMe(user);\n    }).catch(error => {\n      console.error(\"Erreur lors de la récupération des données de l'utilisateur :\", error);\n      setError(error.message);\n    });\n  }, []);\n  function send_friendship() {\n    const url_request = \"http://localhost:3333/friend/request\";\n    const token = getCookie('token');\n    const userData = {\n      sender: me.login,\n      login: friend\n    };\n    axios.post(url_request, userData, {\n      headers: {\n        \"Authorization\": `Bearer ${token}`\n      }\n    }).then(friend => {\n      setRequestStatus('');\n      console.log('demande envoyée');\n    }).catch(() => {\n      console.log('erreur lors de l envoie de la demande');\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Social\",\n    children: error ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Une erreur s'est produite : \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this) : me ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\" Bienvenue \", me.login, \" !\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"friend_request\",\n        children: [/*#__PURE__*/_jsxDEV(Input_field, {\n          text: \"Ajouter un ami\",\n          value: friend,\n          onChange: e => setFriend(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          value: \"Envoyer une demande\",\n          handleClick: send_friendship\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Chargement en cours...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 9\n  }, this);\n}\n_s(Home, \"OjBj4oKS4AS6HsPkphGwUHTJu2E=\");\n_c3 = Home;\nexport default Home;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"Input_field\");\n$RefreshReg$(_c2, \"Button\");\n$RefreshReg$(_c3, \"Home\");","map":{"version":3,"names":["axios","useState","useEffect","jsxDEV","_jsxDEV","Fragment","_Fragment","getCookie","name","value","document","cookie","parts","split","length","pop","shift","Input_field","text","onChange","children","type","placeholder","fileName","_jsxFileName","lineNumber","columnNumber","_c","Button","handleClick","className","onClick","_c2","Home","socket","_s","token","friend","setFriend","me","setMe","error","setError","requestStatus","setRequestStatus","url_get_me","get","headers","then","response","user","data","console","log","catch","message","send_friendship","url_request","userData","sender","login","post","e","target","_c3","$RefreshReg$"],"sources":["/app/src/Home.tsx"],"sourcesContent":["import axios from \"axios\";\nimport { useState , useEffect} from \"react\";\n\nfunction getCookie(name: String) {\n  const value = `; ${document.cookie}`;\n  const parts = value.split(`; ${name}=`);\n  if (parts.length === 2) return parts.pop().split(';').shift();\n}\n\nfunction Input_field({text, value, onChange}){\n    return (\n      <>\n        <input type=\"text\" placeholder={text} value={value} onChange={onChange}/>\n      </>\n    );\n}\n\nfunction Button({ value, handleClick }){\n  return (\n    <button className='send_friendship_button' onClick={handleClick}>\n      {value}\n    </button>\n  )\n}\n\nfunction Home({ socket }) {\n    const token = getCookie('token');\n    const [friend, setFriend] = useState('');\n    const [me, setMe] = useState(null);\n    const [error, setError] = useState(null);\n    const [requestStatus, setRequestStatus] = useState(null);\n\n    useEffect(() => {\n      const url_get_me = \"http://localhost:3333/users/me\";\n      axios.get(url_get_me, {\n        headers: {\n          \"Authorization\": `Bearer ${token}`\n        }\n      }).then(response => {\n        const user = response.data;\n        console.log(\"Données de l'utilisateur :\", user);\n        setMe(user);\n      }).catch(error => {\n        console.error(\"Erreur lors de la récupération des données de l'utilisateur :\", error);\n        setError(error.message);\n      });\n    }, []);\n    function send_friendship() {\n      const url_request = \"http://localhost:3333/friend/request\";\n      const token = getCookie('token');\n      const userData = {\n        sender: me.login,\n        login: friend,\n      };\n      axios.post(url_request, userData, {\n        headers: {\n          \"Authorization\": `Bearer ${token}`,\n        }\n      }).then((friend) => {\n        setRequestStatus('')\n        console.log('demande envoyée')\n      }).catch(() => {\n        console.log('erreur lors de l envoie de la demande');\n      })\n      ;\n    }\n    return (\n        <div className='Social'>\n          {error ? (\n        <p>Une erreur s'est produite : {error}</p>\n      ) : me ? (\n        <div>\n          <h1> Bienvenue {me.login} !</h1>\n          <div className='friend_request'>\n            <Input_field text='Ajouter un ami' value={friend} onChange={e => setFriend(e.target.value)} />\n            <Button value='Envoyer une demande' handleClick={send_friendship} />\n          </div>\n        </div>\n      ) : (\n        <p>Chargement en cours...</p>\n      )}\n        </div>\n        \n    )\n}\nexport default Home"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}